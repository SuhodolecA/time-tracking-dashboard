<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">

  <title>Frontend Mentor | Time tracking dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/style.css">

  <!-- Feel free to remove these styles or customise in your own stylesheet 👍 -->
  <style>
    .attribution {
      font-size: 11px;
      text-align: center;
    }

    .attribution a {
      color: hsl(228, 45%, 44%);
    }
  </style>
</head>

<body>

  <div class="dashboard">
    <h1>Time tracking dashboard</h1>
    <div class="dashboard-container">
      <header class="dashboard-header">
        <div class="dashboard-header__user">
          <img src="images/image-jeremy.png" alt="avatar" class="dashboard-header__user-avatar" />
          <div class="dashboard-header__user-info">
            <h2 class="dashboard-header__user-info__report">Report for</h2>
            <p class="dashboard-header__user-info__name">Jeremy Robson</p>
          </div>
        </div>
        <ul class="dashboard-header__period" role="tablist">
          <li class="dashboard-header__period-item">
            <button class="dashboard-header__period-item__btn" type="button" role="tab" aria-selected="false">Daily</button>
          </li>
          <li class="dashboard-header__period-item">
            <button class="dashboard-header__period-item__btn" type="button" role="tab" aria-selected="true">Weekly</button>
          </li>
          <li class="dashboard-header__period-item">
            <button class="dashboard-header__period-item__btn" type="button" role="tab" aria-selected="false">Monthly</button>
          </li>
        </ul>
      </header>
      <main class="dashboard-main">
        <ul class="dashboard-main__activities">
          <li class="dashboard-main__activities-item">
            <div class="dashboard-main__activities-item-content">
              <div class="dashboard-main__activities-item-content__header">
                <h3 class="dashboard-main__activities-item-content__header-title">Work</h3>
                <a aria-label="work" href="#work" class="dashboard-main__activities-item-content__header-link">
                  <svg width="21" height="5" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M2.5 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm8 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm8 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Z"
                      fill="#BBC0FF" fill-rule="evenodd" />
                  </svg>
                </a>
              </div>
              <div class="dashboard-main__activities-item-content__data">
                <p class="dashboard-main__activities-item-content__data-current">
                  <span class="dashboard-main__activities-item-content__data-current__value"></span><span
                    class="dashboard-main__activities-item-content__data-current__units">hrs</span>
                </p>
                <p class="dashboard-main__activities-item-content__data-previous">
                  <span class="dashboard-main__activities-item-content__data-previous__period">Last week -</span>
                  <span class="dashboard-main__activities-item-content__data-previous__value"></span><span
                    class="dashboard-main__activities-item-content__data-previous__units">hrs</span>
                </p>
              </div>
            </div>
          </li>
          <li class="dashboard-main__activities-item play">
            <div class="dashboard-main__activities-item-content">
              <div class="dashboard-main__activities-item-content__header">
                <h3 class="dashboard-main__activities-item-content__header-title">Play</h3>
                <a aria-label="play" href="#play" class="dashboard-main__activities-item-content__header-link">
                  <svg width="21" height="5" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M2.5 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm8 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm8 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Z"
                      fill="#BBC0FF" fill-rule="evenodd" />
                  </svg>
                </a>
              </div>
              <div class="dashboard-main__activities-item-content__data">
                <p class="dashboard-main__activities-item-content__data-current">
                  <span class="dashboard-main__activities-item-content__data-current__value"></span><span
                    class="dashboard-main__activities-item-content__data-current__units">hrs</span>
                </p>
                <p class="dashboard-main__activities-item-content__data-previous">
                  <span class="dashboard-main__activities-item-content__data-previous__period">Last week -</span>
                  <span class="dashboard-main__activities-item-content__data-previous__value"></span><span
                    class="dashboard-main__activities-item-content__data-previous__units">hrs</span>
                </p>
              </div>
            </div>
          </li>
          <li class="dashboard-main__activities-item study">
            <div class="dashboard-main__activities-item-content">
              <div class="dashboard-main__activities-item-content__header">
                <h3 class="dashboard-main__activities-item-content__header-title">Study</h3>
                <a aria-label="study" href="#study" class="dashboard-main__activities-item-content__header-link">
                  <svg width="21" height="5" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M2.5 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm8 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm8 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Z"
                      fill="#BBC0FF" fill-rule="evenodd" />
                  </svg>
                </a>
              </div>
              <div class="dashboard-main__activities-item-content__data">
                <p class="dashboard-main__activities-item-content__data-current">
                  <span class="dashboard-main__activities-item-content__data-current__value"></span><span
                    class="dashboard-main__activities-item-content__data-current__units">hrs</span>
                </p>
                <p class="dashboard-main__activities-item-content__data-previous">
                  <span class="dashboard-main__activities-item-content__data-previous__period">Last week -</span>
                  <span class="dashboard-main__activities-item-content__data-previous__value"></span><span
                    class="dashboard-main__activities-item-content__data-previous__units">hrs</span>
                </p>
              </div>
            </div>
          </li>
          <li class="dashboard-main__activities-item exercise">
            <div class="dashboard-main__activities-item-content">
              <div class="dashboard-main__activities-item-content__header">
                <h3 class="dashboard-main__activities-item-content__header-title">Exercise</h3>
                <a aria-label="exercise" href="#exercise" class="dashboard-main__activities-item-content__header-link">
                  <svg width="21" height="5" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M2.5 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm8 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm8 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Z"
                      fill="#BBC0FF" fill-rule="evenodd" />
                  </svg>
                </a>
              </div>
              <div class="dashboard-main__activities-item-content__data">
                <p class="dashboard-main__activities-item-content__data-current">
                  <span class="dashboard-main__activities-item-content__data-current__value"></span><span
                    class="dashboard-main__activities-item-content__data-current__units">hrs</span>
                </p>
                <p class="dashboard-main__activities-item-content__data-previous">
                  <span class="dashboard-main__activities-item-content__data-previous__period">Last week -</span>
                  <span class="dashboard-main__activities-item-content__data-previous__value"></span><span
                    class="dashboard-main__activities-item-content__data-previous__units">hrs</span>
                </p>
              </div>
            </div>
          </li>
          <li class="dashboard-main__activities-item social">
            <div class="dashboard-main__activities-item-content">
              <div class="dashboard-main__activities-item-content__header">
                <h3 class="dashboard-main__activities-item-content__header-title">Social</h3>
                <a aria-label="social" href="#social" class="dashboard-main__activities-item-content__header-link">
                  <svg width="21" height="5" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M2.5 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm8 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm8 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Z"
                      fill="#BBC0FF" fill-rule="evenodd" />
                  </svg>
                </a>
              </div>
              <div class="dashboard-main__activities-item-content__data">
                <p class="dashboard-main__activities-item-content__data-current">
                  <span class="dashboard-main__activities-item-content__data-current__value"></span><span
                    class="dashboard-main__activities-item-content__data-current__units">hrs</span>
                </p>
                <p class="dashboard-main__activities-item-content__data-previous">
                  <span class="dashboard-main__activities-item-content__data-previous__period">Last week -</span>
                  <span class="dashboard-main__activities-item-content__data-previous__value"></span><span
                    class="dashboard-main__activities-item-content__data-previous__units">hrs</span>
                </p>
              </div>
            </div>
          </li>
          <li class="dashboard-main__activities-item self-care">
            <div class="dashboard-main__activities-item-content">
              <div class="dashboard-main__activities-item-content__header">
                <h3 class="dashboard-main__activities-item-content__header-title">Self Care</h3>
                <a aria-label="self-care" href="#self-care" class="dashboard-main__activities-item-content__header-link">
                  <svg width="21" height="5" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M2.5 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm8 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm8 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Z"
                      fill="#BBC0FF" fill-rule="evenodd" />
                  </svg>
                </a>
              </div>
              <div class="dashboard-main__activities-item-content__data">
                <p class="dashboard-main__activities-item-content__data-current">
                  <span class="dashboard-main__activities-item-content__data-current__value">2</span><span
                    class="dashboard-main__activities-item-content__data-current__units">hrs</span>
                </p>
                <p class="dashboard-main__activities-item-content__data-previous">
                  <span class="dashboard-main__activities-item-content__data-previous__period">Last week -</span>
                  <span class="dashboard-main__activities-item-content__data-previous__value"></span><span
                    class="dashboard-main__activities-item-content__data-previous__units">hrs</span>
                </p>
              </div>
            </div </li>
        </ul>
      </main>
    </div>
  </div>
  <footer class="attribution">
    Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>.
    Coded by <a href="https://github.com/SuhodolecA" target="_blank">Sukhadolets Anton</a>.
  </footer>
  <script>
    const periodList = document.querySelectorAll('.dashboard-header__period-item__btn');
    const currentValues = document.querySelectorAll('.dashboard-main__activities-item-content__data-current__value');
    const previousValues = document.querySelectorAll('.dashboard-main__activities-item-content__data-previous__value');
    let data;


    // get data from json and update timetracker
    fetch('data.json')
        .then(response => response.json())
        .then(d => {
          data = d;
          updateTrackingValues(previousValues);
          updateTrackingValues(currentValues);
        })
        
        /* get current period 
        1. Convert node list to array for convenience
        2. Looking for element with attribute aria-selected=true(active element), 
        we using brackets [] because filter method return array and we need element
        3. Get text from element 
        4. Convert text to lowercase so we will use this text in data.json where all text in lowercase format
        */
        function getCurrentPeriod(list) {
         return Array.from(list)
                .filter(i => i.getAttribute('aria-selected') == 'true')[0]
                .textContent
                .toLowerCase();
        }


        /* update data 
        1. Convert value(node list) to array for use array methods
        2. Get current period for using in json data
        3. Get current time(current or previous) for in json data
        4. Looping values list and updating information from data.json
        */ 
        function updateTrackingValues(value) {
          const val = Array.from(value);
          const currentPeriod = getCurrentPeriod(periodList);
          const currentTime = val
                              .some(i => i.classList
                              .contains("dashboard-main__activities-item-content__data-current__value")) ? "current" : "previous";
          for(let  i = 0; i < val.length; i++) {
            val[i].textContent = data[i].timeframes[currentPeriod][currentTime];  
          }
        } 
       

        /* update period btn
        1.Looping period list(daily, weekly, monthly buttons) and set aria-selected attribute to false(reset css styles)
        2. Set to active button(clicked) aria-selected=true(set css styles)
        3. Execute updateTrackingValues function for updating data(for curren and previous lines)
         */
        function updatePeriodBtn() {
          periodList.forEach(btn => btn.setAttribute('aria-selected', 'false'));
          this.setAttribute('aria-selected', 'true');
          updateTrackingValues(previousValues);
          updateTrackingValues(currentValues);
        }

        // add event listener for every period button
        periodList.forEach(btn => btn.addEventListener("click", updatePeriodBtn))

  </script>
</body>

</html>